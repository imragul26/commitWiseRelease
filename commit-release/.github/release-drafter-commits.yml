name-template: "v$RESOLVED_VERSION"
tag-template: "v$RESOLVED_VERSION"
 
categories:
  - title: "ðŸš¨ Breaking Changes"
    labels: ["breaking-change"]
  - title: "âœ¨ Features"
    labels: ["feature"]
  - title: "ðŸ› Bug Fixes"
    labels: ["bug"]
  - title: "ðŸ›  Enhancements"
    labels: ["enhancement"]
  - title: "ðŸ“¦ Dependencies"
    labels: ["dependencies"]
    collapse-after: 2
  - title: "ðŸ“‹ Other Changes"
    labels: []
 
# Updated template to include commit messages
change-template: |
  - $TITLE$IS_MODULE â€“ #$NUMBER
    ${{getCommitMessages(number)}}
 
no-changes-template: "No significant changes."
 
template-variables:
  IS_MODULE: $IS_MODULE_TEMPLATE
 
replacers:
  - search: '\$IS_MODULE_TEMPLATE'
    replace: >-
      ${{
        contains(labels, 'origination') && ' (`origination`)' ||
        contains(labels, 'maintenance') && ' (`maintenance`)' ||
        contains(labels, 'testation') && ' (`testation`)' ||
        ''
      }}

  # Add this replacer to handle commit messages
  - search: '\${{getCommitMessages\(number\)}}'
    replace: >-
      ${{
        (function() {
          try {
            const commitData = JSON.parse(process.env.COMMIT_DATA || '{}');
            return commitData[number] || '  â€¢ No commit messages available';
          } catch (e) {
            return '  â€¢ Error loading commit messages';
          }
        })()
      }}
